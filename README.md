# DWM Dump Viewer

版本：v0.1 
作者：0raN9e

## 简介
DWM Dump Viewer 是一个用于从 `dwm.exe.dmp`中尝试解析并可视化图像的桌面工具。它支持设置分辨率与 `pitch`、通道顺序（RGBA/BGRA）、偏移滑块与字节步长，并提供两种批量导出模式：一键爆破与均匀采样。

## 功能亮点
- 打开 dump 并在指定偏移处解析、预览图像。
- 一键爆破导出：按固定步进遍历偏移并计算评分，仅导出达到阈值的高分结果。
- 均匀采样导出：在全偏移范围内等间距选取 N 个样本（默认 200），不做评分过滤，覆盖更均匀。
- 自动扫描（局部/全局）：在邻近范围或全文件内快速搜索有较好得分的候选参数。
- 仅对齐位置：根据对齐块（默认等同于滑块步长）约束偏移，保证读取安全与速度。
- 适应窗口显示、强制 Alpha=255、RGBA/BGRA 通道切换。

## 核心概念
- 偏移滑块：数值表示“块索引”，实际偏移 = 块索引 × 滑块步长（字节）。
- 可读范围：自动约束到 `file_size - pitch * height`，避免越界读取。
- 评分：用于衡量导出图像的清晰度/对比度，爆破模式用于筛选，高分更倾向于“像样”的画面。

## 一键爆破 vs 均匀采样
- 一键爆破：
  - 遍历大量偏移，逐个打分，仅导出分数 ≥ 阈值的结果。
  - 导出数量不固定，受“步进字节”“阈值”影响；在某些区域可能密集，某些区域稀疏。
- 均匀采样：
  - 在 `[0, 最大偏移(slider)]` 范围内均分为 N 个采样（默认 200），不做评分过滤。
  - 导出数量固定为设定的采样张数，覆盖更均匀，代表性更强。

## ~~快速开始~~暂时不放源码
由于本人没购买付费道具，在ctf比赛中屡屡受挫。用ai搓的一个半成品工具，没有可参考价值，如有需求可私作者。

## 使用指南
- 分辨率与 pitch：
  - 选择预设或手动设置宽高；使用“自动计算 pitch”根据 `width * 4` 对齐（默认按 256 对齐）。
- 通道顺序与 Alpha：
  - 切换 `RGBA/BGRA`；启用“强制 Alpha=255”确保图像不透明显示。
- 偏移与滑块：
  - 可在偏移输入框直接填字节偏移，或通过滑块（步长可调）快速移动。
- 自动扫描：
  - 在局部（±跨度）或全文件范围内寻找高分候选，自动写回最佳偏移/参数。
- 一键爆破导出：
  - 设置步进、阈值与导出上限，导出的 PNG 文件名包含偏移、pitch、顺序与评分后缀。
- 均匀采样导出：
  - 设置“采样张数”（默认 200），点击“均匀采样导出”在全滑块范围均匀取样并导出。
  - 可勾选“仅对齐位置”将采样点按对齐块对齐，保证读取安全。

## 输出位置与命名
- 导出目录：`output/`
- 命名示例：`off{偏移}_pitch{pitch}_{order}_{宽}x{高}_{score}.png`

## 变更与版本
- v0.1：初始发布；增加“均匀采样导出”、取消采样/爆破、自动扫描优化、读缓冲优化等。

